<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>রামাদ্বান প্ল্যানার ২০২৫ | নামাজ, সেহরি ও ইফতারের সময়</title>
  <meta name="description" content="Ramadan Planner 2025 — নামাজের সময়সূচি, সেহরি ও ইফতার টাইম, রমজান ক্যালেন্ডার ও ইসলামিক টুলস।">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- ✅ use adhan.js for accurate prayer times -->
  <script src="https://cdn.jsdelivr.net/gh/batoulapps/adhan-js/dist/Adhan.js"></script>

  <style>
    body {
      font-family: 'Noto Sans Bengali', sans-serif;
      background-color: #f0fdf4;
    }
    .main-content { display: none; }
    .main-content.active { display: block; }
  </style>
</head>

<body class="bg-green-50">

  <!-- HEADER -->
  <header class="bg-green-800 text-white p-5 shadow-lg text-center">
    <h1 class="text-3xl font-bold">রামাদ্বান প্ল্যানার ২০২৫</h1>
    <p class="text-sm mt-1">নামাজের সময়, সেহরি ও ইফতারের সময়সূচি</p>
  </header>

  <!-- PRAYER TIME SECTION -->
  <section class="container mx-auto max-w-4xl p-4 mt-6">
    <div class="bg-white shadow-md rounded-lg p-4 text-center">
      <h2 class="text-xl font-bold text-green-800 mb-3">নামাজের সময়সূচি</h2>
      <p id="prayer-location-display" class="text-gray-600 mb-3">লোকেশন লোড হচ্ছে...</p>
      <div id="prayer-times-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2"></div>
      <p class="text-xs text-gray-500 mt-3" id="prayer-date"></p>
    </div>
  </section>

  <!-- MAIN CONTENT -->
  <main class="container mx-auto max-w-4xl p-4">
    <section id="intro" class="main-content active">
      <div class="bg-white p-5 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-green-800 mb-3">রামাদ্বান পরিকল্পনা</h2>
        <p class="text-gray-700 leading-relaxed">
          রামাদ্বান মাসে আল্লাহর নিকটবর্তী হওয়ার শ্রেষ্ঠ সুযোগ পাওয়া যায়। এই প্ল্যানারে প্রতিদিনের আয়াত, হাদীস, দু'আ ও আমল সংযুক্ত করা হয়েছে যাতে দিনগুলো আরও ফলপ্রসূ হয়।
        </p>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="bg-green-900 text-green-100 text-center p-4 mt-10">
    <p>Developed by <a href="https://www.facebook.com/mehedihasanovi.io/" target="_blank" class="underline font-semibold text-white">Mehedi Hasan Ovi</a></p>
    <p class="text-sm mt-1">© ২০২৫ Ramadan Planner | আস-সুন্নাহ ফাউন্ডেশন</p>
  </footer>

  <!-- ✅ PRAYER TIME SCRIPT (adhan.js) -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const grid = document.getElementById("prayer-times-grid");
      const locationDisplay = document.getElementById("prayer-location-display");
      const dateEl = document.getElementById("prayer-date");

      function renderTimes(times) {
        const prayers = [
          { name: "ফজর", key: "fajr" },
          { name: "যোহর", key: "dhuhr" },
          { name: "আসর", key: "asr" },
          { name: "মাগরিব", key: "maghrib" },
          { name: "ইশা", key: "isha" }
        ];

        grid.innerHTML = "";
        prayers.forEach(p => {
          const div = document.createElement("div");
          div.className = "bg-green-800/10 p-3 rounded-lg shadow-sm";
          div.innerHTML = `
            <p class="text-xs sm:text-sm text-gray-700">${p.name}</p>
            <p class="font-bold text-base sm:text-lg text-green-800">${times[p.key]}</p>
          `;
          grid.appendChild(div);
        });
      }

      function loadPrayerTimes(lat, lon) {
        // Set calculation method (Muslim World League)
        const params = adhan.CalculationMethod.MuslimWorldLeague();
        params.adjustments = { fajr: 0, dhuhr: 0, asr: 0, maghrib: 0, isha: 0 };

        const coordinates = new adhan.Coordinates(lat, lon);
        const date = new Date();
        const prayerTimes = new adhan.PrayerTimes(coordinates, date, params);

        const times = {
          fajr: prayerTimes.fajr.toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' }),
          dhuhr: prayerTimes.dhuhr.toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' }),
          asr: prayerTimes.asr.toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' }),
          maghrib: prayerTimes.maghrib.toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' }),
          isha: prayerTimes.isha.toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' })
        };

        renderTimes(times);

        // show date
        dateEl.textContent = `তারিখ: ${date.toLocaleDateString('bn-BD', {
          weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
        })}`;
      }

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          pos => {
            const lat = pos.coords.latitude;
            const lon = pos.coords.longitude;
            locationDisplay.textContent = `আপনার অবস্থান: ${lat.toFixed(2)}, ${lon.toFixed(2)}`;
            loadPrayerTimes(lat, lon);
          },
          () => {
            locationDisplay.textContent = "লোকেশন অনুমতি না দেওয়ায় ঢাকা শহরের সময় দেখানো হচ্ছে।";
            loadPrayerTimes(23.8103, 90.4125); // fallback: Dhaka
          }
        );
      } else {
        locationDisplay.textContent = "লোকেশন সাপোর্ট করা যায়নি, ঢাকা সময় দেখানো হচ্ছে।";
        loadPrayerTimes(23.8103, 90.4125);
      }
    });
  </script>

</body>
</html>
